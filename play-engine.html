<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XQ7B0Z9FK3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XQ7B0Z9FK3');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engine Game - Chess Nerd</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <a href="index.html" style="color: inherit; text-decoration: none;">
                    <span>Chess Nerd</span>
                </a>
            </div>
            <div class="controls">
                <div class="accent-selector">
                    <span class="material-icons">palette</span>
                    <select id="accentColor" class="color-dropdown">
                        <option value="#deb887">Burlywood</option>
                        <option value="#5f9ea0">Cadet Blue</option>
                        <option value="#6495ed">Cornflower</option>
                        <option value="#0d9488">Teal</option>
                        <option value="#8b5cf6">Purple</option>
                        <option value="#ef4444">Red</option>
                    </select>
                </div>
                <button id="themeToggle" class="btn btn-secondary">
                    <span class="material-icons">dark_mode</span>
                </button>
            </div>
        </header>

        <main>
            <div id="toolView">
                <div class="tool-header">
                    <div class="tool-title">
                        <span class="material-icons" id="toolIcon">smart_toy</span>
                        <h2 id="toolName">Engine Game</h2>
                    </div>
                    <div class="tool-actions">
                        <button id="backButton" class="btn btn-secondary">
                            <span class="material-icons">arrow_back</span>
                            Back
                        </button>
                    </div>
                </div>

                <div class="tool-description">
                    Play a quick game against the Lozza JavaScript engine. Click squares to move, follow the PGN on the right, and click any move to jump the board to that position.
                </div>

                <div class="options-panel">
                    <div class="options-grid">
                        <div class="option-group">
                            <label for="engineColor">Engine side</label>
                            <select id="engineColor">
                                <option value="b">Black (you start as White)</option>
                                <option value="w">White (you start as Black)</option>
                            </select>
                        </div>
                        <div class="option-group">
                            <label for="moveTime">Engine think time</label>
                            <input type="range" id="moveTime" min="200" max="3000" step="100" value="1500">
                            <span class="stats" id="moveTimeLabel">1.5s</span>
                        </div>
                        <div class="option-group">
                            <label>Board actions</label>
                            <div class="pgn-actions">
                                <button id="newGameBtn" class="btn btn-secondary btn-compact">
                                    <span class="material-icons" style="font-size: 1rem;">refresh</span> New Game
                                </button>
                                <button id="flipBoardBtn" class="btn btn-secondary btn-compact">
                                    <span class="material-icons" style="font-size: 1rem;">flip_camera_android</span> Flip Board
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="io-container engine-grid">
                    <div class="io-panel">
                        <div class="io-label">
                            <span>Board</span>
                            <span class="stats" id="boardStats">White to move</span>
                        </div>
                        <div class="board-wrapper">
                            <div class="board-toolbar">
                                <div id="engineStatus" class="engine-chip warning">Lozza warming up...</div>
                                <div class="board-buttons">
                                    <button id="undoBtn" class="btn btn-secondary btn-compact">
                                        <span class="material-icons" style="font-size: 1rem;">undo</span> Undo
                                    </button>
                                    <button id="redoBtn" class="btn btn-secondary btn-compact">
                                        <span class="material-icons" style="font-size: 1rem;">redo</span> Redo
                                    </button>
                                </div>
                            </div>
                            <div class="board-shell">
                                <div class="board-files" id="filesTop"></div>
                                <div class="board-mid">
                                    <div class="board-ranks" id="ranksLeft"></div>
                                    <div id="chessBoard" class="chess-board" data-orientation="white"></div>
                                    <div class="board-ranks" id="ranksRight"></div>
                                </div>
                                <div class="board-files" id="filesBottom"></div>
                            </div>
                            <div class="board-footer">
                                <div id="playerSide" class="color-pill">You: White</div>
                                <div id="engineSideLabel" class="color-pill engine">Lozza: Black</div>
                            </div>
                        </div>
                    </div>
                    <div class="io-panel">
                        <div class="io-label">
                            <span>Moves & Log</span>
                            <span class="stats" id="moveStats">0 moves</span>
                        </div>
                        <div class="pgn-panel">
                            <div class="pgn-actions">
                                <button id="loadPgnBtn" class="btn btn-secondary btn-compact">
                                    <span class="material-icons" style="font-size: 1rem;">file_upload</span> Load PGN
                                </button>
                                <button id="copyPgnBtn" class="btn btn-secondary btn-compact">
                                    <span class="material-icons" style="font-size: 1rem;">content_copy</span> Copy PGN
                                </button>
                                <button id="analyzeGameBtn" class="btn btn-secondary btn-compact" disabled>
                                    <span class="material-icons" style="font-size: 1rem;">analytics</span>
                                    <span class="btn-label">Analyze Game</span>
                                </button>
                            </div>
                            <div id="moveList" class="move-list"></div>
                            <textarea id="pgnText" class="output visually-hidden" readonly aria-hidden="true" tabindex="-1"></textarea>
                            <div class="engine-log" id="engineLog"></div>
                        </div>
                    </div>
                </div>

                <div class="status-bar">
                    <div id="statusMessage" class="success">Initializing Lozza...</div>
                    <div id="toolStats"></div>
                </div>
            </div>
        </main>

        <footer class="site-footer">
            <p>&copy; 2025 Chess Nerd<br>Contact: moving.form.of.dust@gmail.com</p>
        </footer>
    </div>

    <script src="js/theme.js"></script>
    <script src="js/chess.min.js"></script>
    <script src="js/play-engine.js"></script>
</body>
</html>
