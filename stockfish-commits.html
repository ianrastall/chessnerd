<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XQ7B0Z9FK3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XQ7B0Z9FK3');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stockfish Commits - Chess Nerd</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">

    <style>
      /* Minimal page-local styling; relies on your CSS vars (bg, accent, etc.) */
      .sf-controls-row {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        align-items: end;
      }
      .sf-controls-row .option-group { min-width: 180px; }
      .sf-controls-row input[type="text"] { width: 100%; }

      .sf-toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 0.75rem;
      }
      .sf-toolbar .left, .sf-toolbar .right {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        align-items: center;
      }

      .sf-calendar {
        border: 1px solid var(--border, rgba(255,255,255,0.12));
        border-radius: 6px;
        overflow: hidden;
        margin-bottom: 1rem;
      }
      .sf-calendar-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5rem 0.75rem;
        background: var(--bg-secondary, rgba(255,255,255,0.05));
        border-bottom: 1px solid var(--border, rgba(255,255,255,0.12));
      }
      .sf-calendar-grid {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
      }
      .sf-cal-cell, .sf-cal-dow {
        padding: 0.5rem;
        border-right: 1px solid var(--border, rgba(255,255,255,0.10));
        border-bottom: 1px solid var(--border, rgba(255,255,255,0.10));
        min-height: 44px;
      }
      .sf-cal-dow {
        font-size: 0.75rem;
        opacity: 0.8;
        background: var(--bg-secondary, rgba(255,255,255,0.04));
      }
      .sf-cal-cell:last-child, .sf-cal-dow:last-child { border-right: none; }
      .sf-cal-cell button {
        width: 100%;
        text-align: left;
        border: none;
        background: transparent;
        color: inherit;
        cursor: pointer;
        padding: 0;
      }
      .sf-cal-count {
        font-size: 0.75rem;
        opacity: 0.85;
        margin-top: 0.25rem;
      }
      .sf-cal-cell.is-empty { opacity: 0.35; }
      .sf-cal-cell.is-selected { outline: 2px solid var(--accent); outline-offset: -2px; }

      .sf-list {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }
      details.sf-commit {
        background: var(--bg-secondary, rgba(255,255,255,0.04));
        border: 1px solid var(--border, rgba(255,255,255,0.12));
        border-radius: 6px;
        overflow: hidden;
      }
      details.sf-commit summary {
        list-style: none;
        cursor: pointer;
        padding: 0.75rem 0.75rem;
        display: flex;
        gap: 0.75rem;
        align-items: baseline;
        justify-content: space-between;
      }
      details.sf-commit summary::-webkit-details-marker { display: none; }

      .sf-summary-left {
        display: flex;
        flex-wrap: wrap;
        gap: 0.6rem;
        align-items: baseline;
      }
      .sf-hash {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.9rem;
        opacity: 0.95;
      }
      .sf-date {
        font-size: 0.85rem;
        opacity: 0.8;
        white-space: nowrap;
      }
      .sf-subject {
        font-size: 0.95rem;
      }
      .sf-author {
        font-size: 0.85rem;
        opacity: 0.8;
      }

      .sf-pills {
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem;
        align-items: center;
      }
      .sf-pill {
        font-size: 0.75rem;
        padding: 0.12rem 0.4rem;
        border-radius: 999px;
        border: 1px solid var(--border, rgba(255,255,255,0.18));
        opacity: 0.9;
      }
      .sf-pill.warn { border-color: rgba(255,200,0,0.35); }

      .sf-body {
        padding: 0.75rem 0.75rem 0.9rem;
        border-top: 1px solid var(--border, rgba(255,255,255,0.10));
      }
      .sf-links {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem 0.75rem;
        margin-bottom: 0.75rem;
      }
      .sf-links a { text-decoration: none; }
      .sf-message {
        white-space: pre-wrap;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.85rem;
        background: var(--bg-tertiary, rgba(255,255,255,0.03));
        padding: 0.75rem;
        border-radius: 4px;
        border: 1px solid var(--border, rgba(255,255,255,0.10));
      }

      .sf-subsection details summary {
        padding: 0.5rem 0;
        opacity: 0.9;
      }
      .sf-downloads {
        margin-top: 0.5rem;
        display: flex;
        flex-direction: column;
        gap: 0.35rem;
      }
      .sf-downloads a {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.82rem;
      }

      .sf-pagination {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
      }
      .sf-pagination .group {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        align-items: center;
      }
      .sf-muted { opacity: 0.8; }

      /* --- Force this tool to be single-column even if global CSS defines io-container as 2-col --- */
      .io-container.io-container-single {
        display: block !important;          /* beats flex/grid in many cases */
        width: 100% !important;
        max-width: 100% !important;
      }

      .io-container.io-container-single .io-panel {
        width: 100% !important;
        max-width: 100% !important;
        flex: 1 1 100% !important;
      }

      /* If your global .io-container is grid, this also neutralizes it */
      .io-container.io-container-single {
        grid-template-columns: 1fr !important;
      }

      /* --- Commit summary should carry real info and wrap nicely --- */
      details.sf-commit summary {
        display: block !important;
        padding: 0.75rem 0.75rem !important;
      }

      .sf-summary-top {
        display: flex;
        flex-wrap: wrap;
        gap: 0.6rem 0.85rem;
        align-items: baseline;
        justify-content: space-between;
      }

      .sf-summary-title {
        font-size: 1rem;
        font-weight: 600;
      }

      .sf-summary-meta {
        margin-top: 0.35rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem 0.85rem;
        align-items: baseline;
        opacity: 0.9;
      }

      .sf-summary-links {
        margin-top: 0.45rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem 0.6rem;
        align-items: center;
      }

      .sf-linkchip {
        display: inline-flex;
        gap: 0.35rem;
        align-items: center;
        padding: 0.12rem 0.45rem;
        border-radius: 999px;
        border: 1px solid var(--border, rgba(255,255,255,0.18));
        text-decoration: none;
        font-size: 0.8rem;
      }

      .sf-linkchip .material-icons {
        font-size: 18px;
      }

      /* --- Explicit URL rendering --- */
      .sf-linklist {
        margin-top: 0.65rem;
        display: flex;
        flex-direction: column;
        gap: 0.55rem;
      }

      .sf-linkrow {
        border: 1px solid var(--border, rgba(255,255,255,0.10));
        border-radius: 6px;
        padding: 0.55rem 0.6rem;
        background: var(--bg-tertiary, rgba(255,255,255,0.03));
      }

      .sf-linkrow-head {
        display: flex;
        gap: 0.6rem;
        align-items: baseline;
        justify-content: space-between;
        flex-wrap: wrap;
      }

      .sf-linkrow-label {
        font-size: 0.9rem;
        font-weight: 600;
      }

      .sf-linkrow-actions {
        display: inline-flex;
        gap: 0.35rem;
        align-items: center;
      }

      .sf-url {
        margin-top: 0.25rem;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.82rem;
        word-break: break-all;
        opacity: 0.95;
        display: inline-block;
        text-decoration: none;
      }

      .sf-section-title {
        margin-top: 0.9rem;
        margin-bottom: 0.35rem;
        font-weight: 700;
        opacity: 0.95;
      }

      .sf-section-note {
        font-size: 0.82rem;
        opacity: 0.8;
        margin-bottom: 0.45rem;
      }
    </style>
</head>

<body>
<div class="container">
    <header>
        <div class="logo">
            <a href="index.html" style="color: inherit; text-decoration: none;">
                <span>Chess Nerd</span>
            </a>
        </div>
        <div class="controls">
            <div class="accent-selector">
                <span class="material-icons">palette</span>
                <select id="accentColor" class="color-dropdown">
                    <option value="#deb887">Burlywood</option>
                    <option value="#5f9ea0">Cadet Blue</option>
                    <option value="#6495ed">Cornflower</option>
                    <option value="#0d9488">Teal</option>
                    <option value="#8b5cf6">Purple</option>
                    <option value="#ef4444">Red</option>
                </select>
            </div>
            <button id="themeToggle" class="btn btn-secondary">
                <span class="material-icons">dark_mode</span>
            </button>
        </div>
    </header>

    <main>
        <div id="toolView">
            <div class="tool-header">
                <div class="tool-title">
                    <span class="material-icons" id="toolIcon">history</span>
                    <h2 id="toolName">Stockfish Commits</h2>
                </div>
                <div class="tool-actions">
                    <button id="backButton" class="btn btn-secondary">
                        <span class="material-icons">arrow_back</span>
                        Back
                    </button>
                </div>
            </div>

            <div class="options-panel" id="toolOptions">
                <div class="options-grid sf-controls-row">
                    <div class="option-group">
                        <label for="yearSelect">Year</label>
                        <select id="yearSelect" class="color-dropdown"></select>
                    </div>

                    <div class="option-group">
                        <label for="monthSelect">Month</label>
                        <select id="monthSelect" class="color-dropdown"></select>
                    </div>

                    <div class="option-group" style="min-width: 260px;">
                        <label for="searchBox">Search (hash / author / text)</label>
                        <input id="searchBox" type="text" placeholder="e.g., corrhist, 6478, c475024b..." />
                    </div>

                    <div class="option-group" style="min-width: 220px;">
                        <label>Include link sets</label>
                        <div style="display:flex; gap:0.75rem; flex-wrap:wrap;">
                            <label style="display:flex; gap:0.35rem; align-items:center;">
                                <input type="checkbox" id="showAbrok" checked />
                                <span>ABROK builds</span>
                            </label>
                            <label style="display:flex; gap:0.35rem; align-items:center;">
                                <input type="checkbox" id="showArtifacts" />
                                <span>Actions artifacts</span>
                            </label>
                        </div>
                    </div>

                    <div class="option-group">
                        <label for="pageSize">Page size</label>
                        <select id="pageSize" class="color-dropdown">
                            <option value="10">10</option>
                            <option value="20" selected>20</option>
                            <option value="50">50</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="io-container io-container-single">
                <div class="io-panel" style="width: 100%">
                    <div class="io-label">
                        <span>Commits</span>
                        <span class="stats" id="mainStats">Ready</span>
                    </div>

                    <div id="toolContent" style="min-height: 300px; background: var(--bg-tertiary); padding: 1rem; border-radius: 4px;">
                        <div id="calendar"></div>
                        <div class="sf-toolbar">
                            <div class="left">
                                <span class="sf-muted" id="datasetMeta"></span>
                            </div>
                            <div class="right">
                                <button id="clearDayFilter" class="btn btn-secondary" style="display:none;">
                                    <span class="material-icons">event_busy</span>
                                    Clear day filter
                                </button>
                                <button id="copyPageLinks" class="btn btn-secondary">
                                    <span class="material-icons">content_copy</span>
                                    Copy page links
                                </button>
                            </div>
                        </div>

                        <div id="commitList" class="sf-list"></div>

                        <div class="sf-pagination">
                            <div class="group">
                                <button id="firstPage" class="btn btn-secondary">First</button>
                                <button id="prevPage" class="btn btn-secondary">Prev</button>
                                <span id="pageInfo" class="sf-muted"></span>
                                <button id="nextPage" class="btn btn-secondary">Next</button>
                                <button id="lastPage" class="btn btn-secondary">Last</button>
                            </div>
                            <div class="group">
                                <span id="toolStats" class="sf-muted"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="status-bar">
                <div id="statusMessage" class="success">Ready</div>
                <div id="toolStatsBottom"></div>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <p>&copy; 2025 Chess Nerd<br>Contact: moving.form.of.dust@gmail.com</p>
    </footer>
</div>

<script src="js/theme.js"></script>
<script src="js/stockfish-commits.js"></script>
</body>
</html>
